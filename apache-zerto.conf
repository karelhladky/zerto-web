# =============================================================
# ZerTo reverse proxy konfigurace pro Apache
# =============================================================
# Přidej tento blok do svého SSL VirtualHost souboru
# (typicky /etc/apache2/sites-enabled/karelhladky.cz-le-ssl.conf)
#
# Prerekvizity — povolit potřebné moduly:
#   sudo a2enmod proxy proxy_http rewrite
#   sudo systemctl restart apache2
#
# Express server běží na portu 3001 a servuje jak API tak frontend.
# Uprav PORT pokud používáš jiný.
# =============================================================

# --- Vlož do <VirtualHost *:443> bloku: ---

    # ZerTo - frontend (statický build servovaný přes Express)
    ProxyPass /zer-to http://localhost:3001/zer-to
    ProxyPassReverse /zer-to http://localhost:3001/zer-to

    # ZerTo - API
    ProxyPass /api http://localhost:3001/api
    ProxyPassReverse /api http://localhost:3001/api

    # Zachovat původní Host header
    ProxyPreserveHost On

# =============================================================
# Nasazení krok za krokem:
#
# 1. Na serveru buildni frontend:
#      cd /cesta/k/ZerTo-web/client && npm run build
#
# 2. Spusť Express server (doporučuji přes pm2):
#      cd /cesta/k/ZerTo-web/server
#      pm2 start "node --import tsx src/index.ts" --name zerto
#
# 3. Přidej proxy pravidla do SSL virtual hostu
#
# 4. Restartuj Apache:
#      sudo systemctl restart apache2
#
# 5. Aplikace bude dostupná na:
#      https://karelhladky.cz/zer-to
# =============================================================
